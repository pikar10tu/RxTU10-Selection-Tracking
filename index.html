<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RxTU10 ‚Äî Class Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         üî• FIREBASE CONFIG ‚Äî ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ!
         1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà https://console.firebase.google.com
         2. ‡∏™‡∏£‡πâ‡∏≤‡∏á Project ‡πÉ‡∏´‡∏°‡πà
         3. ‡πÄ‡∏û‡∏¥‡πà‡∏° Web App ‡πÅ‡∏•‡πâ‡∏ß copy config ‡∏°‡∏≤‡πÉ‡∏™‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á
         4. ‡πÄ‡∏õ‡∏¥‡∏î Authentication > Sign-in method > Google
         5. ‡πÄ‡∏õ‡∏¥‡∏î Firestore Database > Start in test mode
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider, signOut, onAuthStateChanged }
            from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, updateDoc, onSnapshot, collection, query, getDocs, increment, serverTimestamp, arrayUnion }
            from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

        // ‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç firebaseConfig ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ
        const firebaseConfig = {
            apiKey: "AIzaSyAlmHZZ3JixrQlH7PyMa_QqQuDPEN4RJBE",
            authDomain: "rxtu10dashboard.firebaseapp.com",
            projectId: "rxtu10dashboard",
            storageBucket: "rxtu10dashboard.firebasestorage.app",
            messagingSenderId: "485847555600",
            appId: "1:485847555600:web:1ee57ea6044c687b10b495",
            measurementId: "G-RPJ8V0XM19"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const provider = new GoogleAuthProvider();

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PET DATABASE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        const PET_POOL = [
            // Common (50%)
            { id:"cat",      emoji:"üê±", name:"‡∏ô‡πâ‡∏≠‡∏á‡πÅ‡∏°‡∏ß",    rarity:"common",    effect:"none",          desc:"‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏ã‡∏µ‡πâ‡∏ú‡∏π‡πâ‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Ñ ‡πÅ‡∏ï‡πà cute ‡∏°‡∏≤‡∏Å",  rate:0.20 },
            { id:"rabbit",   emoji:"üê∞", name:"‡∏Å‡∏£‡∏∞‡∏ï‡πà‡∏≤‡∏¢",   rarity:"common",    effect:"none",          desc:"‡∏Å‡∏£‡∏∞‡∏ï‡πà‡∏≤‡∏¢‡∏Ç‡∏≤‡∏ß‡∏ô‡πâ‡∏≠‡∏¢ ‡∏Ç‡∏ô‡∏ü‡∏π ‡∏ô‡∏¥‡∏™‡∏±‡∏¢‡∏î‡∏µ",                 rate:0.15 },
            { id:"hamster",  emoji:"üêπ", name:"‡πÅ‡∏Æ‡∏°‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå", rarity:"common",    effect:"none",          desc:"‡∏ß‡∏¥‡πà‡∏á‡∏•‡πâ‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏ô‡∏∑‡πà‡∏≠‡∏¢",                    rate:0.15 },
            // Rare (30%)
            { id:"fox",      emoji:"ü¶ä", name:"‡∏à‡∏¥‡πâ‡∏á‡∏à‡∏≠‡∏Å",   rarity:"rare",      effect:"coin_boost",    desc:"+10% ‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏≤‡∏Å‡πÄ‡∏Å‡∏°‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á",                     rate:0.12 },
            { id:"owl",      emoji:"ü¶â", name:"‡∏ô‡∏Å‡∏Æ‡∏π‡∏Å",     rarity:"rare",      effect:"coin_boost",    desc:"+15% ‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏≤‡∏Å‡πÄ‡∏Å‡∏°‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á",                     rate:0.10 },
            { id:"panda",    emoji:"üêº", name:"‡πÅ‡∏û‡∏ô‡∏î‡πâ‡∏≤",    rarity:"rare",      effect:"score_boost",   desc:"+5 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡πÉ‡∏ô‡πÄ‡∏Å‡∏° Quiz",                    rate:0.08 },
            // Epic (15%)
            { id:"dragon",   emoji:"üê≤", name:"‡∏°‡∏±‡∏á‡∏Å‡∏£‡∏ô‡πâ‡∏≠‡∏¢", rarity:"epic",      effect:"coin_x2",       desc:"x2 ‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° (‡∏™‡∏∏‡∏î‡πÇ‡∏´‡∏î!)",             rate:0.06 },
            { id:"unicorn",  emoji:"ü¶Ñ", name:"‡∏¢‡∏π‡∏ô‡∏¥‡∏Ñ‡∏≠‡∏£‡πå‡∏ô", rarity:"epic",      effect:"score_x2",      desc:"x2 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏Å‡∏° Quiz ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á",                  rate:0.05 },
            { id:"phoenix",  emoji:"ü¶Ö", name:"‡∏ü‡∏µ‡∏ô‡∏¥‡∏Å‡∏ã‡πå",  rarity:"epic",      effect:"daily_coin",    desc:"+50 ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥",                  rate:0.04 },
            // Legendary (5%)
            { id:"kirin",    emoji:"ü¶Å", name:"‡πÑ‡∏Ñ‡∏£‡∏¥‡∏ô",     rarity:"legendary", effect:"rainbow_name",  desc:"‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏ó‡∏≠‡∏á‡∏ß‡∏¥‡∏ö‡∏ß‡∏±‡∏ö ‚ú®",                rate:0.02 },
            { id:"bahamut",  emoji:"üêâ", name:"‡∏û‡∏≤‡∏Æ‡∏≤‡∏°‡∏∏‡∏ó",   rarity:"legendary", effect:"all_boost",     desc:"‡πÄ‡∏á‡∏¥‡∏ô x3 + ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô x2 + ‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏µ‡∏£‡∏∏‡πâ‡∏á üåà",         rate:0.02 },
            { id:"celestial",emoji:"üåü", name:"‡πÄ‡∏ã‡πÄ‡∏•‡∏™‡πÄ‡∏ä‡∏µ‡∏¢‡∏•",rarity:"legendary", effect:"rainbow_name",  desc:"‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏•‡πà‡∏™‡∏µ‡∏£‡∏∏‡πâ‡∏á‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤ + daily 100 ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç",   rate:0.01 },
        ];

        const RARITY_CONFIG = {
            common:    { color: "#94a3b8", glow: "#94a3b8",  label: "COMMON",    bg: "#f1f5f9" },
            rare:      { color: "#3b82f6", glow: "#3b82f6",  label: "RARE",      bg: "#eff6ff" },
            epic:      { color: "#a855f7", glow: "#a855f7",  label: "EPIC",      bg: "#faf5ff" },
            legendary: { color: "#f59e0b", glow: "#fbbf24",  label: "LEGENDARY", bg: "#fffbeb" },
        };

        const EGG_COST = 100;

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê AUTH ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        window.loginWithGoogle = async () => {
            try {
                provider.setCustomParameters({ prompt: 'select_account' });
                const result = await signInWithPopup(auth, provider);
                await ensureUserDoc(result.user);
            } catch(e) {
                if (e.code !== 'auth/popup-closed-by-user') {
                    showToast("‚ùå Login ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: " + e.message, "error");
                }
            }
        };

        window.logoutUser = async () => {
            await signOut(auth);
            currentUser = null;
            currentUserData = null;
            renderLoginState(null);
        };

        async function ensureUserDoc(user) {
            const ref = doc(db, "users", user.uid);
            const snap = await getDoc(ref);
            if (!snap.exists()) {
                await setDoc(ref, {
                    uid: user.uid,
                    name: user.displayName,
                    email: user.email,
                    photo: user.photoURL,
                    coins: 200,
                    pets: [],
                    activePet: null,
                    nameColor: null,
                    createdAt: serverTimestamp(),
                    lastDaily: null,
                    quizHighScore: 0,
                });
            }
        }

        let currentUser = null;
        let currentUserData = null;
        let userUnsubscribe = null;

        onAuthStateChanged(auth, async (user) => {
            currentUser = user;
            if (user) {
                await ensureUserDoc(user);
                if (userUnsubscribe) userUnsubscribe();
                userUnsubscribe = onSnapshot(doc(db, "users", user.uid), (snap) => {
                    currentUserData = snap.data();
                    renderLoginState(user);
                    checkDailyReward();
                });
            } else {
                renderLoginState(null);
            }
        });

        function renderLoginState(user) {
            const loginSection = document.getElementById('login-section');
            const profileBar = document.getElementById('profile-bar');
            const gachaSection = document.getElementById('gacha-section');

            if (!user) {
                loginSection.style.display = 'flex';
                profileBar.style.display = 'none';
                gachaSection.style.display = 'none';
                return;
            }

            loginSection.style.display = 'none';
            profileBar.style.display = 'flex';
            gachaSection.style.display = 'block';

            const coins = currentUserData?.coins ?? 0;
            const activePet = getActivePet();

            document.getElementById('user-avatar').src = user.photoURL || `https://ui-avatars.com/api/?name=${user.displayName}`;
            document.getElementById('user-name').textContent = user.displayName;
            document.getElementById('coin-count').textContent = coins.toLocaleString();

            // Active pet display
            const petDisplay = document.getElementById('active-pet-display');
            if (activePet) {
                petDisplay.textContent = activePet.emoji;
                petDisplay.title = activePet.name;
                petDisplay.style.display = 'inline';
            } else {
                petDisplay.style.display = 'none';
            }

            // Apply name effect if legendary
            if (activePet?.effect === 'rainbow_name' || activePet?.effect === 'all_boost') {
                document.getElementById('user-name').classList.add('rainbow-text');
            } else {
                document.getElementById('user-name').classList.remove('rainbow-text');
            }

            renderMyPets();
        }

        function getActivePet() {
            if (!currentUserData?.activePet || !currentUserData?.pets) return null;
            return currentUserData.pets.find(p => p.id === currentUserData.activePet && p.instanceId === currentUserData.activePetInstance) 
                || currentUserData.pets.find(p => p.id === currentUserData.activePet)
                || null;
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê DAILY REWARD ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        async function checkDailyReward() {
            if (!currentUser || !currentUserData) return;
            const last = currentUserData.lastDaily?.toDate?.();
            if (!last) { showDailyBtn(); return; }
            const now = new Date();
            const diff = now - last;
            if (diff > 23 * 3600 * 1000) showDailyBtn();
            else hideDailyBtn();

            // Check phoenix/celestial daily
            const activePet = getActivePet();
            if (activePet?.effect === 'daily_coin' || activePet?.effect === 'all_boost') {
                const petLastDaily = currentUserData.petLastDaily?.toDate?.();
                if (!petLastDaily || (now - petLastDaily) > 23 * 3600 * 1000) {
                    const bonus = activePet.effect === 'all_boost' ? 100 : 50;
                    await updateDoc(doc(db, "users", currentUser.uid), {
                        coins: increment(bonus),
                        petLastDaily: serverTimestamp()
                    });
                    showToast(`${activePet.emoji} ${activePet.name} ‡πÉ‡∏´‡πâ daily ${bonus} ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç!`, "success");
                }
            }
        }

        function showDailyBtn() {
            document.getElementById('daily-btn')?.classList.remove('claimed');
        }
        function hideDailyBtn() {
            document.getElementById('daily-btn')?.classList.add('claimed');
        }

        window.claimDaily = async () => {
            if (!currentUser) return;
            const btn = document.getElementById('daily-btn');
            if (btn.classList.contains('claimed')) { showToast("‚è∞ ‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ!", "info"); return; }
            const base = 30;
            const activePet = getActivePet();
            let bonus = base;
            if (activePet?.effect === 'coin_boost') bonus = Math.floor(base * 1.1);
            if (activePet?.effect === 'coin_x2' || activePet?.effect === 'all_boost') bonus = base * 2;
            await updateDoc(doc(db, "users", currentUser.uid), {
                coins: increment(bonus),
                lastDaily: serverTimestamp()
            });
            hideDailyBtn();
            showToast(`üéÅ ‡∏£‡∏±‡∏ö Daily +${bonus} ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡πÅ‡∏•‡πâ‡∏ß!`, "success");
            confetti({ particleCount: 80, spread: 60, origin: { y: 0.5 } });
        };

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê GACHA ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function rollPet() {
            const rand = Math.random();
            let cumulative = 0;
            for (const pet of PET_POOL) {
                cumulative += pet.rate;
                if (rand <= cumulative) return { ...pet, instanceId: Date.now() + Math.random() };
            }
            return { ...PET_POOL[0], instanceId: Date.now() };
        }

        window.openGacha = async () => {
            if (!currentUser || !currentUserData) {
                showToast("‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤ Login ‡∏Å‡πà‡∏≠‡∏ô", "error"); return;
            }
            if (currentUserData.coins < EGG_COST) {
                showToast(`‚ùå ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡πÑ‡∏°‡πà‡∏û‡∏≠! ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ${EGG_COST} ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç`, "error"); return;
            }

            // Deduct
            await updateDoc(doc(db, "users", currentUser.uid), { coins: increment(-EGG_COST) });

            // Roll
            const pet = rollPet();
            showGachaResult(pet);

            // Save pet
            await updateDoc(doc(db, "users", currentUser.uid), {
                pets: arrayUnion({ id: pet.id, emoji: pet.emoji, name: pet.name, rarity: pet.rarity, effect: pet.effect, desc: pet.desc, instanceId: pet.instanceId })
            });
        };

        function showGachaResult(pet) {
            const cfg = RARITY_CONFIG[pet.rarity];
            const modal = document.getElementById('gacha-modal');
            const content = document.getElementById('gacha-result-content');
            content.innerHTML = `
                <div class="gacha-result-inner" style="--glow: ${cfg.glow}">
                    <div class="gacha-rarity-badge" style="background:${cfg.color}">${cfg.label}</div>
                    <div class="gacha-emoji">${pet.emoji}</div>
                    <div class="gacha-pet-name">${pet.name}</div>
                    <div class="gacha-pet-desc">${pet.desc}</div>
                    <div class="gacha-effect-tag">‚ú® ${pet.effect === 'none' ? '‡πÑ‡∏°‡πà‡∏°‡∏µ Effect' : pet.desc}</div>
                    <div class="gacha-actions">
                        <button class="btn-primary" onclick="setActivePet('${pet.id}', ${pet.instanceId}); closeGachaModal()">‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏•‡∏¢!</button>
                        <button class="btn-secondary" onclick="closeGachaModal()">‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô</button>
                    </div>
                </div>
            `;
            modal.classList.add('active');

            // Confetti by rarity
            const colors = pet.rarity === 'legendary' ? ['#f59e0b', '#fbbf24', '#fff'] :
                           pet.rarity === 'epic' ? ['#a855f7', '#c084fc', '#fff'] :
                           pet.rarity === 'rare' ? ['#3b82f6', '#60a5fa', '#fff'] :
                           ['#94a3b8', '#cbd5e1', '#fff'];
            confetti({ particleCount: pet.rarity === 'legendary' ? 200 : pet.rarity === 'epic' ? 120 : 60,
                spread: 80, origin: { y: 0.5 }, colors });
        }

        window.closeGachaModal = () => {
            document.getElementById('gacha-modal').classList.remove('active');
        };

        window.setActivePet = async (petId, instanceId) => {
            if (!currentUser) return;
            await updateDoc(doc(db, "users", currentUser.uid), {
                activePet: petId,
                activePetInstance: instanceId || null
            });
            showToast("üêæ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÅ‡∏•‡πâ‡∏ß!", "success");
        };

        window.removePet = async () => {
            if (!currentUser) return;
            await updateDoc(doc(db, "users", currentUser.uid), { activePet: null, activePetInstance: null });
            showToast("‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏ñ‡∏π‡∏Å‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß", "info");
        };

        function renderMyPets() {
            const container = document.getElementById('my-pets-grid');
            if (!container || !currentUserData?.pets?.length) {
                if (container) container.innerHTML = '<p style="text-align:center;color:#94a3b8;font-size:0.85rem">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á ‡∏ã‡∏∑‡πâ‡∏≠‡πÑ‡∏Ç‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏¢! ü•ö</p>';
                return;
            }

            const activePet = getActivePet();
            container.innerHTML = currentUserData.pets.map(pet => {
                const cfg = RARITY_CONFIG[pet.rarity];
                const isActive = activePet && pet.id === activePet.id;
                return `
                    <div class="pet-card ${isActive ? 'pet-active' : ''}" 
                         style="--rarity-color: ${cfg.color}; --rarity-bg: ${cfg.bg}"
                         onclick="setActivePet('${pet.id}', ${pet.instanceId || 0})">
                        <div class="pet-emoji">${pet.emoji}</div>
                        <div class="pet-card-name">${pet.name}</div>
                        <div class="pet-rarity-dot" style="background:${cfg.color}">${cfg.label}</div>
                        ${isActive ? '<div class="pet-active-badge">ACTIVE</div>' : ''}
                    </div>
                `;
            }).join('');
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê GAME COIN REWARDS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        window.awardCoins = async (amount, reason) => {
            if (!currentUser || !currentUserData) return amount;
            const activePet = getActivePet();
            let final = amount;
            if (activePet?.effect === 'coin_boost') final = Math.floor(amount * (activePet.id === 'owl' ? 1.15 : 1.10));
            if (activePet?.effect === 'coin_x2' || activePet?.effect === 'all_boost') final = amount * (activePet.effect === 'all_boost' ? 3 : 2);
            await updateDoc(doc(db, "users", currentUser.uid), { coins: increment(final) });
            if (final !== amount) showToast(`${activePet.emoji} Effect! +${final} ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç (‡πÅ‡∏ó‡∏ô +${amount})`, "success");
            return final;
        };

        window.getScoreMultiplier = () => {
            const activePet = getActivePet();
            if (!activePet) return 1;
            if (activePet.effect === 'score_boost') return 1; // +5 flat
            if (activePet.effect === 'score_x2' || activePet.effect === 'all_boost') return activePet.effect === 'all_boost' ? 2 : 2;
            return 1;
        };

        window.getScoreBonus = () => {
            const activePet = getActivePet();
            if (activePet?.effect === 'score_boost') return 5;
            return 0;
        };

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TRADE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        window.openTradePanel = () => {
            const panel = document.getElementById('trade-panel');
            if (!currentUser) { showToast("‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤ Login ‡∏Å‡πà‡∏≠‡∏ô", "error"); return; }
            renderTradePanel();
            panel.classList.add('active');
        };
        window.closeTradePanel = () => {
            document.getElementById('trade-panel').classList.remove('active');
        };

        async function renderTradePanel() {
            if (!currentUserData?.pets?.length) {
                document.getElementById('trade-my-pets').innerHTML = '<p style="color:#94a3b8">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</p>';
                return;
            }
            document.getElementById('trade-my-pets').innerHTML = currentUserData.pets.map((pet, i) => {
                const cfg = RARITY_CONFIG[pet.rarity];
                return `
                    <div class="trade-pet-item" onclick="selectForTrade(${i})" id="trade-pet-${i}">
                        <span>${pet.emoji}</span>
                        <span style="font-size:0.8rem">${pet.name}</span>
                        <span style="color:${cfg.color};font-size:0.7rem">${cfg.label}</span>
                    </div>
                `;
            }).join('');
        }

        let selectedTradeIndex = null;
        window.selectForTrade = (i) => {
            selectedTradeIndex = i;
            document.querySelectorAll('.trade-pet-item').forEach(el => el.classList.remove('selected'));
            document.getElementById(`trade-pet-${i}`)?.classList.add('selected');
        };

        window.sendTrade = async () => {
            const targetEmail = document.getElementById('trade-target-email').value.trim();
            if (!targetEmail || selectedTradeIndex === null) {
                showToast("‚ùå ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÅ‡∏•‡∏∞‡πÉ‡∏™‡πà email ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô", "error"); return;
            }
            const pet = currentUserData.pets[selectedTradeIndex];
            // Find user by email
            const usersQuery = query(collection(db, "users"));
            const allUsers = await getDocs(usersQuery);
            let targetUser = null;
            allUsers.forEach(u => { if (u.data().email === targetEmail) targetUser = u; });
            if (!targetUser) { showToast("‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ô‡∏µ‡πâ", "error"); return; }

            // Transfer
            const newPets = currentUserData.pets.filter((_, i) => i !== selectedTradeIndex);
            await setDoc(doc(db, "users", currentUser.uid), { pets: newPets }, { merge: true });
            await updateDoc(doc(db, "users", targetUser.id), { pets: arrayUnion(pet) });
            showToast(`‚úÖ ‡∏™‡πà‡∏á ${pet.emoji} ${pet.name} ‡πÉ‡∏´‡πâ ${targetEmail} ‡πÅ‡∏•‡πâ‡∏ß!`, "success");
            closeTradePanel();
            selectedTradeIndex = null;
        };

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê QUIZ (with coins) ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        let quizScore = 0;
        let quizCorrectAnswer = null;

        window.startQuiz = () => {
            quizScore = 0;
            document.getElementById('current-score').textContent = '0';
            document.getElementById('quiz-start').style.display = 'none';
            document.getElementById('quiz-play').style.display = 'block';
            nextQuestion();
        };

        window.nextQuestion = () => {
            if (!allStudents.length) return;
            const student = allStudents[Math.floor(Math.random() * allStudents.length)];
            quizCorrectAnswer = student.realName;
            document.getElementById('quiz-nickname').textContent = `‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô: ${student.nickname.split(' ')[0]}`;

            let options = [quizCorrectAnswer];
            while (options.length < 4) {
                const w = allStudents[Math.floor(Math.random() * allStudents.length)].realName;
                if (!options.includes(w)) options.push(w);
            }
            options.sort(() => Math.random() - 0.5);
            const container = document.getElementById('quiz-options');
            container.innerHTML = '';
            options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'quiz-option-btn';
                btn.textContent = opt;
                btn.onclick = () => checkQuizAnswer(opt);
                container.appendChild(btn);
            });
        };

        window.checkQuizAnswer = async (selected) => {
            if (selected === quizCorrectAnswer) {
                quizScore++;
                document.getElementById('quiz-options').querySelectorAll('button').forEach(b => {
                    if (b.textContent === selected) b.classList.add('correct');
                });
                // Coin + multiplier
                const base = 5;
                const multi = window.getScoreMultiplier();
                const bonus = window.getScoreBonus();
                const scoreEarned = quizScore * multi + bonus;
                const coinEarned = await window.awardCoins(base, 'quiz');
                const scoreDisplay = document.getElementById('current-score');
                scoreDisplay.textContent = scoreEarned;
                confetti({ particleCount: 40, spread: 50, origin: { y: 0.6 }, colors: ['#10b981'] });
                setTimeout(window.nextQuestion, 600);
            } else {
                document.getElementById('quiz-options').querySelectorAll('button').forEach(b => {
                    if (b.textContent === selected) b.classList.add('wrong');
                    if (b.textContent === quizCorrectAnswer) b.classList.add('correct');
                });
                // Save high score
                if (currentUser && quizScore > (currentUserData?.quizHighScore || 0)) {
                    await updateDoc(doc(db, "users", currentUser.uid), { quizHighScore: quizScore });
                }
                setTimeout(() => {
                    document.getElementById('quiz-start').style.display = 'block';
                    document.getElementById('quiz-play').style.display = 'none';
                    document.getElementById('quiz-start-msg').textContent = `‚ùå ‡∏ú‡∏¥‡∏î! ‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏£‡∏¥‡∏á‡∏Ñ‡∏∑‡∏≠ "${quizCorrectAnswer}" | ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î: ${Math.max(quizScore, currentUserData?.quizHighScore||0)}`;
                }, 900);
            }
        };

        // Make available globally
        window.__db = db;
        window.__auth = auth;
        window.__firebase_ready = true;
    </script>

    <style>
        :root {
            --sci: #2563eb;
            --care: #10b981;
            --gold: #f59e0b;
            --bg: #f0f4f8;
            --card: #ffffff;
            --text: #1e293b;
            --muted: #64748b;
            --border: #e2e8f0;
            --common: #94a3b8;
            --rare: #3b82f6;
            --epic: #a855f7;
            --legendary: #f59e0b;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Kanit', sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            padding-bottom: 60px;
        }

        /* ‚îÄ‚îÄ TOP NAV ‚îÄ‚îÄ */
        .top-nav {
            background: white;
            border-bottom: 1px solid var(--border);
            padding: 12px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 200;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }

        .nav-brand {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        #login-section {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        #profile-bar {
            display: none;
            align-items: center;
            gap: 12px;
        }

        .user-avatar {
            width: 34px;
            height: 34px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--border);
        }

        #user-name {
            font-size: 0.9rem;
            font-weight: 600;
            max-width: 120px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .coin-badge {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border: 1px solid #f59e0b;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 700;
            color: #92400e;
            display: flex;
            align-items: center;
            gap: 4px;
            cursor: pointer;
        }

        #active-pet-display {
            font-size: 1.4rem;
            cursor: pointer;
            transition: transform 0.2s;
        }
        #active-pet-display:hover { transform: scale(1.3); }

        /* ‚îÄ‚îÄ BUTTONS ‚îÄ‚îÄ */
        .btn-google {
            background: white;
            border: 1.5px solid var(--border);
            padding: 8px 16px;
            border-radius: 8px;
            font-family: inherit;
            font-size: 0.9rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: 0.2s;
            color: var(--text);
            font-weight: 500;
        }
        .btn-google:hover { background: #f8fafc; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }

        .btn-logout {
            background: none;
            border: 1px solid #fca5a5;
            color: #ef4444;
            padding: 5px 12px;
            border-radius: 8px;
            font-family: inherit;
            font-size: 0.8rem;
            cursor: pointer;
        }

        .btn-primary {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            font-family: inherit;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: 0.2s;
        }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(245,158,11,0.4); }

        .btn-secondary {
            background: var(--border);
            color: var(--muted);
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            font-family: inherit;
            font-size: 0.95rem;
            cursor: pointer;
        }

        .btn-daily {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-family: inherit;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: 0.2s;
        }
        .btn-daily.claimed { background: var(--border); color: var(--muted); }
        .btn-daily:not(.claimed):hover { transform: scale(1.05); }

        /* ‚îÄ‚îÄ MAIN LAYOUT ‚îÄ‚îÄ */
        .container { max-width: 820px; margin: 0 auto; padding: 20px 16px; }

        /* ‚îÄ‚îÄ HEADER CARD ‚îÄ‚îÄ */
        .header-card {
            background: white;
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .header-title {
            text-align: center;
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--text);
        }

        .progress-labels {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .prog-label { display: flex; align-items: center; gap: 6px; font-weight: 600; }
        .prog-dot { width: 10px; height: 10px; border-radius: 50%; }

        .progress-bar {
            height: 22px;
            background: var(--border);
            border-radius: 50px;
            overflow: hidden;
            display: flex;
        }
        .prog-sci { background: var(--sci); height: 100%; transition: width 1.2s cubic-bezier(0.34,1.56,0.64,1); }
        .prog-care { background: var(--care); height: 100%; transition: width 1.2s cubic-bezier(0.34,1.56,0.64,1); }

        /* ‚îÄ‚îÄ STATS ‚îÄ‚îÄ */
        .stats-row {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 16px;
        }

        .stat-card {
            background: white;
            border-radius: 16px;
            padding: 14px;
            text-align: center;
            cursor: pointer;
            border: 2px solid transparent;
            transition: 0.25s;
            box-shadow: 0 2px 6px rgba(0,0,0,0.04);
        }
        .stat-card:hover { transform: translateY(-2px); }
        .stat-card.active-sci { border-color: var(--sci); background: #eff6ff; }
        .stat-card.active-care { border-color: var(--care); background: #ecfdf5; }
        .stat-card.active-all { border-color: var(--gold); background: #fffbeb; }
        .stat-label { font-size: 0.75rem; color: var(--muted); text-transform: uppercase; font-weight: 600; margin-bottom: 4px; }
        .stat-num { font-size: 1.7rem; font-weight: 700; }

        /* ‚îÄ‚îÄ SEARCH ‚îÄ‚îÄ */
        .search-wrap {
            position: sticky;
            top: 65px;
            z-index: 100;
            margin-bottom: 14px;
        }
        .search-input {
            width: 100%;
            padding: 13px 18px;
            border: 2px solid white;
            border-radius: 14px;
            font-family: inherit;
            font-size: 1rem;
            background: white;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            outline: none;
            transition: 0.2s;
        }
        .search-input:focus { border-color: var(--gold); }

        /* ‚îÄ‚îÄ NAME GRID ‚îÄ‚îÄ */
        .list-card {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            margin-bottom: 16px;
        }

        .list-title {
            text-align: center;
            font-size: 0.9rem;
            color: var(--muted);
            margin-bottom: 16px;
        }

        .names-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
            gap: 12px;
        }

        .name-tag {
            background: #fafafa;
            border: 1.5px solid var(--border);
            border-radius: 14px;
            padding: 14px 8px;
            cursor: pointer;
            transition: 0.2s;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 7px;
        }
        .name-tag:hover { transform: translateY(-3px); box-shadow: 0 6px 14px rgba(0,0,0,0.07); border-color: #cbd5e1; }

        .name-tag img {
            width: 66px;
            height: 66px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.12);
            background: var(--border);
        }

        .nt-nickname { font-weight: 600; font-size: 0.95rem; }
        .nt-id { font-size: 0.72rem; color: var(--muted); }
        .nt-badge {
            font-size: 0.6rem;
            padding: 2px 8px;
            border-radius: 6px;
            color: white;
            font-weight: 700;
            text-transform: uppercase;
        }

        /* ‚îÄ‚îÄ GACHA SECTION ‚îÄ‚îÄ */
        #gacha-section { display: none; }

        .section-title {
            font-size: 1rem;
            font-weight: 700;
            color: var(--muted);
            text-align: center;
            margin: 28px 0 14px;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .gacha-card {
            background: white;
            border-radius: 20px;
            padding: 24px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            margin-bottom: 16px;
        }

        .egg-btn {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 50%, #f59e0b 100%);
            border: 3px solid #f59e0b;
            border-radius: 20px;
            padding: 24px 40px;
            cursor: pointer;
            transition: 0.3s;
            display: inline-block;
            font-family: inherit;
        }
        .egg-btn:hover { transform: scale(1.05) rotate(3deg); box-shadow: 0 8px 24px rgba(245,158,11,0.4); }
        .egg-emoji { font-size: 3.5rem; display: block; animation: wobble 3s ease infinite; }
        @keyframes wobble { 0%,100%{transform:rotate(-5deg)} 50%{transform:rotate(5deg)} }
        .egg-label { font-size: 1rem; font-weight: 700; color: #92400e; margin-top: 6px; }
        .egg-cost { font-size: 0.85rem; color: #b45309; }

        .rates-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin-top: 16px;
        }
        .rate-item {
            padding: 8px;
            border-radius: 10px;
            text-align: center;
            font-size: 0.78rem;
            font-weight: 600;
        }

        /* ‚îÄ‚îÄ MY PETS ‚îÄ‚îÄ */
        .pets-card {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            margin-bottom: 16px;
        }

        .pets-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 14px;
        }

        #my-pets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 10px;
        }

        .pet-card {
            background: var(--rarity-bg, #f8fafc);
            border: 2px solid transparent;
            border-radius: 12px;
            padding: 10px 6px;
            text-align: center;
            cursor: pointer;
            transition: 0.2s;
            position: relative;
        }
        .pet-card:hover { transform: translateY(-3px); border-color: var(--rarity-color); }
        .pet-card.pet-active { border-color: var(--rarity-color); box-shadow: 0 0 12px color-mix(in srgb, var(--rarity-color) 30%, transparent); }
        .pet-emoji { font-size: 1.8rem; }
        .pet-card-name { font-size: 0.7rem; font-weight: 600; margin-top: 4px; color: var(--text); }
        .pet-rarity-dot { font-size: 0.55rem; font-weight: 700; color: var(--rarity-color); }
        .pet-active-badge {
            position: absolute;
            top: -6px;
            right: -6px;
            background: var(--rarity-color);
            color: white;
            font-size: 0.5rem;
            font-weight: 700;
            padding: 2px 5px;
            border-radius: 6px;
        }

        /* ‚îÄ‚îÄ GAME ZONE ‚îÄ‚îÄ */
        .game-card {
            background: white;
            border-radius: 20px;
            padding: 22px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            margin-bottom: 16px;
        }

        .game-title { font-size: 1.1rem; font-weight: 700; color: var(--text); margin-bottom: 16px; text-align: center; }

        .quiz-container { display: none; }
        .quiz-question { font-size: 1.3rem; font-weight: 700; color: var(--gold); margin-bottom: 16px; }
        .quiz-options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .quiz-option-btn {
            background: #f8fafc;
            border: 2px solid var(--border);
            padding: 12px;
            border-radius: 12px;
            font-family: inherit;
            font-size: 0.9rem;
            cursor: pointer;
            transition: 0.15s;
            color: var(--text);
        }
        .quiz-option-btn:hover { background: #f1f5f9; border-color: #cbd5e1; }
        .quiz-option-btn.correct { background: #dcfce7; border-color: #10b981; color: #065f46; }
        .quiz-option-btn.wrong { background: #fee2e2; border-color: #ef4444; color: #7f1d1d; }

        .score-display { font-size: 0.95rem; color: var(--muted); margin-bottom: 12px; }

        .flashcard {
            background: #f8fafc;
            border-radius: 14px;
            padding: 28px;
            min-height: 110px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: 0.25s;
            border: 2px dashed var(--border);
            margin-bottom: 14px;
        }
        .flashcard:hover { background: #f1f5f9; }
        .drug-name { font-size: 1.7rem; font-weight: 700; color: var(--text); }
        .drug-ans { font-size: 1rem; color: var(--care); margin-top: 8px; display: none; font-weight: 500; }
        .drug-hint { font-size: 0.8rem; color: var(--muted); margin-top: 10px; }

        /* ‚îÄ‚îÄ PROFILE MODAL ‚îÄ‚îÄ */
        .modal-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.5);
            z-index: 500;
            backdrop-filter: blur(4px);
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .modal-overlay.active { display: flex; }

        .profile-modal {
            background: white;
            border-radius: 24px;
            padding: 28px;
            max-width: 380px;
            width: 100%;
            animation: slideUp 0.3s ease;
            position: relative;
        }

        @keyframes slideUp { from { transform: translateY(30px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        .modal-close {
            position: absolute;
            top: 14px;
            right: 14px;
            background: var(--border);
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-profile-img {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid white;
            box-shadow: 0 4px 14px rgba(0,0,0,0.12);
            margin-bottom: 12px;
        }

        .modal-nickname { font-size: 1.4rem; font-weight: 700; }
        .modal-realname { font-size: 0.95rem; color: var(--muted); margin-top: 2px; }
        .modal-id { font-size: 0.8rem; color: var(--muted); font-family: 'Space Mono', monospace; }

        .modal-track-badge {
            padding: 4px 14px;
            border-radius: 20px;
            color: white;
            font-size: 0.8rem;
            font-weight: 700;
            margin-top: 8px;
            display: inline-block;
        }

        /* ‚îÄ‚îÄ GACHA MODAL ‚îÄ‚îÄ */
        .gacha-modal-inner {
            background: white;
            border-radius: 28px;
            padding: 36px 28px;
            max-width: 340px;
            width: 100%;
            animation: popIn 0.4s cubic-bezier(0.34,1.56,0.64,1);
            text-align: center;
        }

        @keyframes popIn { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        .gacha-result-inner {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .gacha-rarity-badge {
            padding: 4px 16px;
            border-radius: 20px;
            color: white;
            font-size: 0.8rem;
            font-weight: 800;
            letter-spacing: 2px;
        }

        .gacha-emoji {
            font-size: 5rem;
            animation: bounce 0.6s ease;
            filter: drop-shadow(0 0 20px var(--glow, #f59e0b));
        }
        @keyframes bounce { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-15px)} }

        .gacha-pet-name { font-size: 1.6rem; font-weight: 800; }
        .gacha-pet-desc { font-size: 0.9rem; color: var(--muted); }
        .gacha-effect-tag { font-size: 0.85rem; background: #f8fafc; padding: 6px 14px; border-radius: 20px; color: var(--muted); }
        .gacha-actions { display: flex; gap: 10px; margin-top: 10px; }

        /* ‚îÄ‚îÄ TRADE PANEL ‚îÄ‚îÄ */
        .trade-panel {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-radius: 24px 24px 0 0;
            padding: 24px 20px;
            box-shadow: 0 -8px 30px rgba(0,0,0,0.1);
            z-index: 400;
            transform: translateY(100%);
            transition: transform 0.35s cubic-bezier(0.34,1.56,0.64,1);
            max-height: 70vh;
            overflow-y: auto;
        }
        .trade-panel.active { transform: translateY(0); }

        .trade-pet-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px;
            border-radius: 10px;
            border: 2px solid var(--border);
            cursor: pointer;
            margin-bottom: 8px;
            transition: 0.15s;
        }
        .trade-pet-item.selected { border-color: var(--sci); background: #eff6ff; }

        .trade-input {
            width: 100%;
            padding: 10px 14px;
            border: 2px solid var(--border);
            border-radius: 12px;
            font-family: inherit;
            font-size: 0.9rem;
            outline: none;
            margin: 12px 0;
        }
        .trade-input:focus { border-color: var(--sci); }

        /* ‚îÄ‚îÄ DAILY BTN ‚îÄ‚îÄ */
        #daily-btn { display: none; }

        /* ‚îÄ‚îÄ RAINBOW TEXT ‚îÄ‚îÄ */
        .rainbow-text {
            background: linear-gradient(90deg, #f59e0b, #ef4444, #a855f7, #3b82f6, #10b981, #f59e0b);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: rainbow 2s linear infinite;
        }
        @keyframes rainbow { to { background-position: 200% center; } }

        /* ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ */
        #toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(80px);
            background: #1e293b;
            color: white;
            padding: 12px 20px;
            border-radius: 12px;
            font-size: 0.9rem;
            font-weight: 500;
            z-index: 1000;
            transition: transform 0.3s ease;
            white-space: nowrap;
            box-shadow: 0 4px 14px rgba(0,0,0,0.2);
        }
        #toast.show { transform: translateX(-50%) translateY(0); }
        #toast.success { background: #065f46; }
        #toast.error { background: #7f1d1d; }
        #toast.info { background: #1e40af; }

        footer {
            text-align: center;
            padding: 30px 20px 10px;
            color: var(--muted);
            font-size: 0.82rem;
        }

        @media (max-width: 480px) {
            .names-grid { grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); }
            .rates-grid { grid-template-columns: repeat(2, 1fr); }
            .stats-row { gap: 8px; }
            .stat-num { font-size: 1.4rem; }
        }
    </style>
</head>
<body>

<!-- ‚îÄ‚îÄ TOP NAV ‚îÄ‚îÄ -->
<nav class="top-nav">
    <div class="nav-brand">üíä RxTU10</div>
    <div id="login-section">
        <button class="btn-google" onclick="loginWithGoogle()">
            <svg width="16" height="16" viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/></svg>
            Login ‡∏î‡πâ‡∏ß‡∏¢ Google
        </button>
    </div>
    <div id="profile-bar">
        <span id="active-pet-display" style="display:none"></span>
        <img id="user-avatar" class="user-avatar" src="" alt="avatar">
        <span id="user-name"></span>
        <div class="coin-badge" onclick="document.getElementById('gacha-section').scrollIntoView({behavior:'smooth'})">
            ü™ô <span id="coin-count">0</span>
        </div>
        <button id="daily-btn" class="btn-daily" onclick="claimDaily()">üéÅ Daily</button>
        <button class="btn-logout" onclick="logoutUser()">‡∏≠‡∏≠‡∏Å</button>
    </div>
</nav>

<div class="container">

    <!-- ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ -->
    <div class="header-card">
        <div class="header-title">üíä RxTU10 Dashboard</div>
        <div class="progress-labels">
            <div class="prog-label"><span class="prog-dot" style="background:var(--sci)"></span> Sci: <span id="p-sci">0</span> ‡∏Ñ‡∏ô</div>
            <div class="prog-label"><span class="prog-dot" style="background:var(--care)"></span> Care: <span id="p-care">0</span> ‡∏Ñ‡∏ô</div>
        </div>
        <div class="progress-bar">
            <div class="prog-sci" id="bar-sci" style="width:0%"></div>
            <div class="prog-care" id="bar-care" style="width:0%"></div>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ STATS ‚îÄ‚îÄ -->
    <div class="stats-row">
        <div class="stat-card" id="card-sci" onclick="setTrack('sci')">
            <div class="stat-label">Sci</div>
            <div class="stat-num" style="color:var(--sci)" id="cnt-sci">0</div>
        </div>
        <div class="stat-card" id="card-all" onclick="setTrack('all')">
            <div class="stat-label">‡∏£‡∏ß‡∏°‡∏£‡∏∏‡πà‡∏ô</div>
            <div class="stat-num" style="color:var(--gold)" id="cnt-all">0</div>
        </div>
        <div class="stat-card" id="card-care" onclick="setTrack('care')">
            <div class="stat-label">Care</div>
            <div class="stat-num" style="color:var(--care)" id="cnt-care">0</div>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ SEARCH ‚îÄ‚îÄ -->
    <div class="search-wrap">
        <input type="text" class="search-input" id="search" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô ‡∏´‡∏£‡∏∑‡∏≠ ‡∏£‡∏´‡∏±‡∏™..." oninput="handleSearch()">
    </div>

    <!-- ‚îÄ‚îÄ LIST ‚îÄ‚îÄ -->
    <div class="list-card">
        <div class="list-title" id="list-title">‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠ RxTU10 ‚Äî ‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏£‡∏¥‡∏á</div>
        <div class="names-grid" id="names-display"></div>
    </div>

    <!-- ‚ïê‚ïê GACHA SECTION (logged in only) ‚ïê‚ïê -->
    <div id="gacha-section">
        <div class="section-title">üêæ ‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á & Gacha</div>

        <!-- My Pets -->
        <div class="pets-card">
            <div class="pets-card-header">
                <span style="font-weight:700;font-size:1rem">‡∏Ñ‡∏≠‡∏•‡πÄ‡∏•‡∏Å‡∏ä‡∏±‡∏ô‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</span>
                <button class="btn-secondary" style="padding:6px 12px;font-size:0.8rem" onclick="openTradePanel()">üîÑ Trade</button>
            </div>
            <div id="my-pets-grid"></div>
        </div>

        <!-- Gacha -->
        <div class="gacha-card">
            <div class="game-title">ü•ö ‡∏ü‡∏±‡∏Å‡πÑ‡∏Ç‡πà‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</div>
            <button class="egg-btn" onclick="openGacha()">
                <span class="egg-emoji">ü•ö</span>
                <div class="egg-label">‡∏ü‡∏±‡∏Å‡πÑ‡∏Ç‡πà!</div>
                <div class="egg-cost">‡∏£‡∏≤‡∏Ñ‡∏≤ 100 ü™ô</div>
            </button>
            <div class="rates-grid" style="margin-top:20px">
                <div class="rate-item" style="background:#f1f5f9;color:#64748b">Common<br><b>50%</b></div>
                <div class="rate-item" style="background:#eff6ff;color:#3b82f6">Rare<br><b>30%</b></div>
                <div class="rate-item" style="background:#faf5ff;color:#a855f7">Epic<br><b>15%</b></div>
                <div class="rate-item" style="background:#fffbeb;color:#f59e0b">Legendary<br><b>5%</b></div>
            </div>
        </div>
    </div>

    <!-- ‚ïê‚ïê RELAX ZONE ‚ïê‚ïê -->
    <div class="section-title">‚ú® RELAX ZONE ‚ú®</div>

    <!-- Quiz -->
    <div class="game-card">
        <div class="game-title">üïµÔ∏è ‡πÄ‡∏Å‡∏°‡πÅ‡∏ü‡∏ô‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå‡πÅ‡∏ó‡πâ ‚Äî ‡∏ó‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏£‡∏¥‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô</div>
        <div id="quiz-start">
            <p id="quiz-start-msg" style="color:var(--muted);font-size:0.9rem;margin-bottom:14px">‡∏ó‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏£‡∏¥‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á! (‡πÑ‡∏î‡πâ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏î‡πâ‡∏ß‡∏¢ ü™ô)</p>
            <button class="btn-primary" onclick="startQuiz()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°!</button>
        </div>
        <div id="quiz-play" class="quiz-container">
            <div class="score-display">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á: <b style="color:var(--gold)" id="current-score">0</b></div>
            <div class="quiz-question" id="quiz-nickname">‡∏ô‡πâ‡∏≠‡∏á...</div>
            <div class="quiz-options-grid" id="quiz-options"></div>
        </div>
    </div>

    <!-- Flashcard -->
    <div class="game-card">
        <div class="game-title">üíä ‡∏ó‡∏≤‡∏¢‡∏¢‡∏≤ (50 Drugs)</div>
        <div class="flashcard" onclick="revealDrug()">
            <div class="drug-name" id="flash-drug">???</div>
            <div class="drug-ans" id="flash-ans">...</div>
            <div class="drug-hint" id="flash-hint">‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏â‡∏•‡∏¢</div>
        </div>
        <button class="btn-secondary" style="width:100%" onclick="nextDrug()">‡∏™‡∏∏‡πà‡∏°‡∏¢‡∏≤‡πÉ‡∏´‡∏°‡πà üîÑ</button>
    </div>

    <footer>
        RxTU10 Track Selection Dashboard<br>
        <span style="font-weight:600">by pika ‚Äî v3.0 üî•</span>
    </footer>
</div>

<!-- ‚îÄ‚îÄ PROFILE MODAL ‚îÄ‚îÄ -->
<div class="modal-overlay" id="profile-modal">
    <div class="profile-modal">
        <button class="modal-close" onclick="closeProfileModal()">‚úï</button>
        <div style="text-align:center">
            <img id="modal-img" class="modal-profile-img" src="" alt="">
            <div class="modal-nickname" id="modal-nickname"></div>
            <div class="modal-realname" id="modal-realname"></div>
            <div class="modal-id" id="modal-id"></div>
            <div class="modal-track-badge" id="modal-badge"></div>
        </div>
    </div>
</div>

<!-- ‚îÄ‚îÄ GACHA RESULT MODAL ‚îÄ‚îÄ -->
<div class="modal-overlay" id="gacha-modal" onclick="if(event.target===this)closeGachaModal()">
    <div class="gacha-modal-inner">
        <div id="gacha-result-content"></div>
    </div>
</div>

<!-- ‚îÄ‚îÄ TRADE PANEL ‚îÄ‚îÄ -->
<div class="trade-panel" id="trade-panel">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px">
        <span style="font-size:1.1rem;font-weight:700">üîÑ Trade ‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</span>
        <button class="modal-close" onclick="closeTradePanel()">‚úï</button>
    </div>
    <p style="font-size:0.85rem;color:var(--muted);margin-bottom:12px">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡∏™‡πà‡∏á:</p>
    <div id="trade-my-pets"></div>
    <input type="email" class="trade-input" id="trade-target-email" placeholder="Email ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ">
    <button class="btn-primary" style="width:100%" onclick="sendTrade()">‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô ‚úâÔ∏è</button>
</div>

<!-- ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ -->
<div id="toast"></div>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  STUDENT DATA
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const rawData = {
    sci: [
        "‡∏Å‡∏¥‡πâ‡∏ü‡∏ó‡πå üéÅ (6418610082)","‡πÇ‡∏ö üéÄ (6418610140)","‡∏≠‡∏¥‡∏Å‡∏Ñ‡∏¥‡∏ß üë¶ (6418610264)","‡πÄ‡∏´‡∏ô‡∏∑‡∏≠ ‚õ∞Ô∏è (6418610280)",
        "‡∏Ç‡∏¥‡∏° üéº (6518540015)","‡∏°‡∏≤‡∏¢‡∏î‡πå üíñ (6518610016)","‡∏ï‡∏¥‡∏ô üíé (6518610024)","‡∏≠‡πâ‡∏ô üêøÔ∏è (6518610073)",
        "‡πÄ‡∏≠‡πá‡∏°‡∏°‡∏µ‡πà üå∏ (6518610099)","‡πÇ‡∏ü‡∏Å‡∏±‡∏™ üîç (6518610123)","‡∏•‡∏¥‡πâ‡∏á üîó (6518610164)","‡∏ï‡∏¥‡∏ì‡∏ì‡πå ‚ú® (6518610172)",
        "‡πÄ‡∏û‡πà‡∏¢‡πÄ‡∏û‡πà‡∏¢ üèÆ (6518610180)","‡∏õ‡πà‡∏≤‡∏ô üåø (6518610198)","‡πÄ‡∏≠‡πÄ‡∏ä‡∏µ‡∏¢ üåè (6518610214)","‡πÅ‡∏û‡∏£ üëó (6518610222)",
        "‡∏Å‡∏≤‡∏ü‡∏¥‡∏ß üê± (6518610297)","‡πÅ‡∏ï‡∏á‡πÇ‡∏° üçâ (6518610347)","‡∏™‡πâ‡∏°‡πÇ‡∏≠ üçä (6518610420)","‡∏≠‡∏∏‡πâ‡∏° ü§ó (6518610446)",
        "‡∏ó‡∏¥‡∏ß üå≤ (6518610479)","‡πÅ‡∏û‡∏ô üêº (6518610503)","‡∏õ‡∏±‡πâ‡∏ô üè∫ (6518610545)","‡πÅ‡∏Å‡πä‡∏õ üß¢ (6518610560)",
        "‡πÅ‡∏¢‡∏° üçì (6518610578)","‡πÅ‡∏û‡∏£‡πÑ‡∏´‡∏° üßµ (6518610586)","‡πÑ‡∏≠‡∏à‡∏±‡∏á üç¶ (6518610610)","‡πÄ‡∏û‡πâ‡∏ô‡∏ó‡πå üé® (6518670010)",
        "‡∏™‡∏∏‡πà‡∏ô üß∂ (6518670069)","‡∏ó‡∏∞‡πÄ‡∏• üåä (6518670077)","‡∏ï‡∏±‡πâ‡∏ß üéüÔ∏è (6518670093)","‡πÅ‡∏û‡∏£‡∏ß‡∏≤ üíé (6518670101)",
        "‡∏ã‡∏≤‡πÄ‡∏ô‡∏µ‡∏¢‡∏£‡πå üéê (6518670119)","‡πÄ‡∏õ‡∏õ‡πÄ‡∏õ‡∏≠‡∏£‡πå üå∂Ô∏è (6518670150)","‡∏ß‡πà‡∏≤‡∏ô‡∏ß‡πà‡∏≤‡∏ô üçÉ (6518670176)","‡∏ü‡πâ‡∏≤‡πÉ‡∏™ ‚òÄÔ∏è (6518670192)",
        "‡πÄ‡∏Ç‡∏ï üèÅ (6518670200)","‡πÄ‡∏ö‡πÄ‡∏ö‡πâ üß∏ (6518670226)","‡πÄ‡∏ä‡∏≠‡∏£‡πå‡∏£‡∏µ‡πà üçí (6518670267)"
    ],
    care: [
        "‡πÄ‡∏°‡∏¢‡πå üåô (6418610157)","‡πÄ‡∏î‡∏µ‡∏¢‡∏£ ü¶å (6418670110)","‡∏ö‡∏±‡∏ß ü™∑ (6518610032)","‡∏õ‡∏≤‡∏•‡πå‡∏°‡∏°‡∏µ‡πà üå¥ (6518610040)",
        "‡∏≠‡∏∏‡πã‡∏á‡∏≠‡∏¥‡πã‡∏á ü¶≠ (6518610057)","‡πÄ‡∏û‡∏µ‡∏¢‡∏ß ü´ß (6518610065)","‡πÉ‡∏ö‡∏ö‡∏±‡∏ß üçÉ (6518610081)","‡∏ö‡∏•‡∏π üíô (6518610107)",
        "‡∏ï‡πâ‡∏ô‡∏ô‡πâ‡∏≥ üå± (6518610115)","‡πÅ‡∏ã‡∏ô‡∏ô‡∏µ‡πà ‚òÄÔ∏è (6518610131)","‡∏Å‡∏±‡∏™ ‚õΩ (6518610149)","‡∏ô‡∏¥‡∏ô‡∏à‡∏µ‡πâ ü•∑ (6518610206)",
        "‡∏ô‡∏ô‡∏ó‡πå üï∂Ô∏è (6518610230)","‡∏°‡∏¥‡∏ô‡∏ó‡πå üåø (6518610248)","‡πÅ‡∏õ‡πâ‡∏á üçû (6518610255)","‡∏ï‡∏µ‡∏ï‡∏µ‡πâ üé∏ (6518610263)",
        "‡πÅ‡∏û‡∏° üëí (6518610271)","‡∏≠‡∏∞‡∏ï‡∏≠‡∏° ‚öõÔ∏è (6518610305)","‡∏ô‡∏≤‡∏¢ üëî (6518610313)","‡∏Å‡∏≤‡∏£‡πå‡∏ï‡∏π‡∏ô üìñ (6518610321)",
        "‡∏ô‡∏±‡∏ã üå† (6518610354)","‡πÅ‡∏û‡∏ô‡∏î‡πâ‡∏≤ üêº (6518610362)","‡∏õ‡∏¥‡πä‡∏Å üé∏ (6518610388)","‡∏à‡∏≠‡∏¢ üòä (6518610396)",
        "‡∏°‡∏≤‡∏¢‡∏î‡πå ‚ú® (6518610404)","‡πÇ‡∏î‡∏ô‡∏±‡∏ó üç© (6518610453)","‡∏ö‡∏∏‡πä‡∏Ñ üìö (6518610461)","‡∏õ‡∏≠‡∏ô‡∏î‡πå üí∑ (6518610495)",
        "‡πÄ‡∏ö‡∏Ñ ü•ì (6518610511)","‡∏ï‡πâ‡∏ô‡∏Å‡∏•‡πâ‡∏≤ ü™¥ (6518610537)","‡∏°‡∏¥‡πâ‡∏ô‡∏ó‡πå üå± (6518610552)","‡∏ï‡πâ‡∏ô‡∏ô‡πâ‡∏≥ üíß (6518610602)",
        "‡πÅ‡∏û‡∏£‡∏ó‡∏≠‡∏á ‚ú® (6518660011)","‡πÅ‡∏Å‡πâ‡∏° üòä (6518660029)","‡πÅ‡∏™‡∏ô‡∏î‡∏µ üòá (6518670028)","‡∏≠‡∏∏‡πä‡∏Å‡∏≠‡∏¥‡πä‡∏Å üê£ (6518670044)",
        "‡∏ï‡πâ‡πâ‡∏ô‡∏ô‡πâ‡∏≥ üåä (6518670085)","‡πÄ‡∏à üÉè (6518670135)","‡πÄ‡∏õ‡∏°‡∏µ‡πà üç≠ (6518670143)","‡∏ó‡πâ‡∏≠‡∏á‡∏ü‡πâ‡∏≤ ‚òÅÔ∏è (6518670184)",
        "‡∏û‡∏µ‡∏ä üçë (6518670218)","‡∏™‡∏°‡∏≤‡∏¢‡∏î‡πå üòÅ (6518670242)","‡πÅ‡∏û‡∏£ üå∏ (6518670259)","‡∏ï‡∏∞‡∏ß‡∏±‡∏ô üåª (6518670283)"
    ]
};

const realNamesRaw = "‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ä‡∏ç‡∏≤‡∏ô‡∏¥‡∏® ‡∏ä‡∏≤‡∏¢‡πÄ‡∏°‡∏Ü‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ì‡∏±‡∏ä‡∏ä‡∏≤ ‡∏®‡∏£‡∏µ‡∏ó‡∏≠‡∏á‡∏™‡∏∏‡∏Ç‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ì‡∏±‡∏è‡∏ê‡∏ì‡∏¥‡∏ä‡∏≤ ‡∏ï‡∏£‡∏≤‡∏´‡∏¢‡∏Å‡∏ô‡∏≤‡∏¢‡∏õ‡∏ß‡∏£‡∏¥‡∏® ‡∏ä‡∏π‡∏ä‡∏°‡∏ä‡∏∑‡πà‡∏ô‡∏ô‡∏≤‡∏¢‡∏û‡∏®‡∏ß‡∏±‡∏ï ‡∏û‡∏∏‡∏ó‡∏ò‡∏¥‡∏ä‡∏ô‡∏°‡πå‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ì‡∏±‡∏é‡∏ê‡∏£‡∏¥‡∏ì‡∏µ‡∏¢‡πå ‡πÄ‡∏ó‡∏∑‡∏≠‡∏Å‡∏ó‡πâ‡∏≤‡∏ß‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏´‡∏£‡∏£‡∏©‡∏ò‡∏£ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏†‡∏±‡∏Å‡∏î‡∏µ‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏Å‡∏ä‡∏Å‡∏£ ‡∏ó‡∏£‡∏á‡πÄ‡∏ï‡∏ä‡∏∞‡πÄ‡∏•‡∏¥‡∏®‡∏ô‡∏≤‡∏¢‡∏Å‡∏é‡∏õ‡∏¥‡∏¢‡∏£‡∏≤‡∏ä ‡∏ä‡∏ô‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏Å‡∏°‡∏•‡∏û‡∏£ ‡∏ß‡πà‡∏≠‡∏á‡πÑ‡∏ß‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏Å‡∏§‡∏ï‡∏¥‡∏¢‡∏≤‡∏û‡∏£ ‡∏Ñ‡∏≥‡∏®‡∏£‡∏µ‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏Å‡∏≠‡πÅ‡∏Å‡πâ‡∏ß ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏®‡∏π‡∏£‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏Å‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏±‡∏è‡∏ê‡πå ‡∏•‡∏≤‡∏†‡∏ó‡∏£‡∏á‡∏™‡∏∏‡∏Ç‡∏ô‡∏≤‡∏¢‡πÄ‡∏Å‡∏ï‡∏∏‡πÇ‡∏û‡∏ò‡∏¥‡πå ‡πÉ‡∏à‡∏™‡∏á‡∏Ü‡πå‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡πÅ‡∏Å‡πâ‡∏ß‡∏ö‡∏∏‡∏©‡∏£‡∏≤‡∏†‡∏£‡∏ì‡πå ‡πÄ‡∏•‡∏≤‡∏´‡∏Å‡∏±‡∏¢‡∏Å‡∏∏‡∏•‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏á‡∏≤‡∏°‡∏ß‡∏£‡∏¥‡∏ô‡∏ó‡∏£‡πå ‡∏Å‡∏¥‡∏ï‡∏ï‡∏¥‡∏à‡∏¥‡∏ï‡∏ï‡πå‡∏ô‡∏≤‡∏¢‡∏à‡∏¥‡∏£‡∏ß‡∏±‡∏í‡∏ô‡πå ‡∏£‡∏±‡∏Å‡∏©‡πå‡∏ß‡∏¥‡πÄ‡∏ä‡∏µ‡∏¢‡∏£‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ä‡∏ô‡∏±‡∏ç‡∏ò‡∏¥‡∏î‡∏≤ ‡∏ß‡∏µ‡∏£‡∏∞‡∏ß‡∏∏‡∏í‡∏¥‡∏û‡∏á‡∏®‡πå‡∏ô‡∏≤‡∏¢‡∏ä‡∏ô‡∏≤‡∏ò‡∏¥‡∏õ ‡∏ö‡∏∏‡∏ç‡∏°‡∏≤‡∏®‡∏¥‡∏£‡∏¥‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ä‡∏ß‡∏±‡∏•‡∏û‡∏±‡∏ä‡∏£ ‡∏ß‡∏¥‡∏ä‡∏±‡∏¢‡∏®‡∏¥‡∏£‡∏¥‡∏£‡∏±‡∏ï‡∏ô‡πå‡∏ô‡∏≤‡∏¢‡∏ä‡∏≤‡∏Ñ‡∏£‡∏¥‡∏© ‡∏ö‡∏ß‡∏£‡∏Å‡∏¥‡∏à‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ä‡∏≤‡∏•‡∏¥‡∏™‡∏≤ ‡∏û‡∏£‡∏™‡∏∏‡∏Ç‡∏à‡∏±‡∏ô‡∏ó‡∏£‡∏≤‡∏ô‡∏≤‡∏¢‡∏ç‡∏≤‡∏ì‡∏û‡∏±‡∏í‡∏ô‡πå ‡∏™‡∏∏‡∏Ç‡πÄ‡∏Å‡∏©‡∏°‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ê‡∏ì‡∏¥‡∏ä‡∏≤ ‡∏à‡∏£‡∏±‡∏™‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏£‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ê‡∏¥‡∏ï‡∏≤‡∏£‡∏µ‡∏¢‡πå ‡∏õ‡∏≤‡∏ô‡∏™‡∏á‡πà‡∏≤‡∏ô‡∏≤‡∏¢‡∏ì‡∏û‡∏á‡∏®‡πå ‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡πÄ‡∏ô‡∏ï‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ì‡∏±‡∏è‡∏ê‡∏ì‡∏¥‡∏ä‡∏≤ ‡∏™‡∏∏‡∏î‡∏Ñ‡∏á‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ì‡∏±‡∏ê‡∏Å‡∏§‡∏ï‡∏≤ ‡∏®‡∏£‡∏µ‡∏ß‡∏¥‡πÄ‡∏ä‡∏µ‡∏¢‡∏£‡∏ô‡∏≤‡∏¢‡∏ì‡∏±‡∏ê‡∏ä‡∏ô‡∏ô‡∏ó‡πå ‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏ï‡∏≤‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ì‡∏±‡∏ê‡∏ì‡∏¥‡∏ä‡∏≤ ‡∏Ç‡∏ß‡∏≤‡∏•‡∏≥‡∏ò‡∏≤‡∏£‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ì‡∏±‡∏ê‡∏ò‡∏¥‡∏î‡∏≤ ‡∏≠‡∏£‡∏∏‡∏ì‡πÅ‡∏™‡∏á‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ï‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡∏ã‡∏≤‡∏ß‡∏≤‡∏ï‡∏µ ‡∏≠‡∏±‡∏•‡∏≠‡∏≤‡∏ï‡∏±‡∏™‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ò‡∏±‡∏ç‡∏£‡∏î‡∏≤ ‡πÇ‡∏ó‡∏ò‡∏£‡∏±‡∏ï‡∏ô‡πå‡∏ô‡∏≤‡∏¢‡∏ò‡∏¥‡∏ï‡∏¥‡∏ß‡∏∏‡∏í‡∏¥ ‡πÄ‡∏û‡∏ä‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏≠‡∏á‡∏ô‡∏≤‡∏¢‡∏ò‡∏µ‡∏£‡πÄ‡∏°‡∏ò ‡πÅ‡∏™‡∏á‡∏≠‡∏£‡∏∏‡∏ì‡∏ô‡∏≤‡∏¢‡∏ô‡∏û‡πÄ‡∏Å‡πâ‡∏≤ ‡∏ß‡∏¥‡∏ß‡∏±‡∏í‡∏ä‡∏¢‡∏≤‡∏á‡∏Å‡∏π‡∏•‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ô‡∏†‡∏±‡∏™‡∏ß‡∏£‡∏£‡∏ì ‡πÅ‡∏ú‡∏•‡∏á‡∏®‡∏£‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ô‡∏±‡∏ä‡∏ä‡∏≤ ‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏ß‡∏á‡∏®‡πå‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ô‡∏±‡∏ã‡∏£‡∏µ‡∏¢‡∏≤ ‡∏ö‡∏∏‡∏ç‡∏ä‡∏π‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ô‡∏±‡∏ô‡∏ï‡∏£‡∏≤ ‡∏≠‡∏¥‡∏ô‡∏ó‡∏£‡πå‡∏ô‡πâ‡∏≠‡∏¢‡∏ô‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏ß‡∏¥‡∏ä‡∏ç‡πå ‡∏≠‡∏≥‡∏ô‡∏ß‡∏¢‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏ß‡∏¥‡πÑ‡∏•‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏õ‡∏£‡∏≤‡∏á‡∏Ñ‡πå‡∏ó‡∏¥‡∏û‡∏¢‡πå ‡∏ö‡∏∏‡∏ç‡∏°‡∏µ‡∏ß‡∏¥‡πÄ‡∏®‡∏©‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏õ‡∏£‡∏≤‡∏ì‡∏õ‡∏£‡∏¥‡∏¢‡∏≤ ‡∏à‡πà‡∏≤‡∏û‡∏•‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏õ‡∏≤‡∏ì‡∏¥‡∏™‡∏£‡∏≤ ‡∏®‡∏£‡∏µ‡∏≠‡∏≤‡∏à‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏û‡∏£‡∏õ‡∏ß‡∏µ‡∏ì‡πå ‡∏ö‡∏∏‡∏£‡∏≤‡∏ì‡πÄ‡∏Ñ‡∏ô‡∏ô‡∏≤‡∏¢‡∏û‡∏¥‡∏ò‡∏¥‡∏ô‡∏±‡∏ô‡∏ó‡πå ‡∏™‡∏±‡∏ï‡∏ï‡∏¥‡∏¢‡∏≤‡∏£‡∏±‡∏Å‡∏©‡πå‡∏ô‡∏≤‡∏¢‡∏û‡∏∏‡∏í‡∏¥‡∏û‡∏á‡∏®‡πå ‡∏ú‡∏î‡∏∏‡∏á‡∏ß‡∏±‡∏í‡∏ô‡∏∞‡πÇ‡∏ä‡∏Ñ‡∏ô‡∏≤‡∏¢‡∏†‡∏π‡∏°‡∏¥‡∏£‡∏û‡∏µ ‡∏ö‡∏π‡∏£‡∏ì‡∏∞‡∏™‡∏°‡∏ó‡∏ö‡∏ô‡∏≤‡∏¢‡∏†‡∏π‡∏ß‡πÄ‡∏î‡∏ä ‡∏ô‡∏¥‡∏•‡∏Ñ‡∏ï‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏°‡∏ô‡∏ì‡∏¥‡∏ä‡∏ä‡∏≤ ‡∏ö‡∏∏‡∏ç‡∏ô‡∏≥‡∏ô‡∏≤‡∏¢‡∏£‡∏±‡∏ä‡∏ä‡∏≤‡∏ô‡∏ô‡∏ó‡πå ‡∏Ç‡∏°‡∏¥‡πâ‡∏ô‡∏ó‡∏≠‡∏á‡∏ô‡∏≤‡∏¢‡∏ß‡∏ä‡∏¥‡∏£‡∏ß‡∏¥‡∏ó‡∏¢‡πå ‡∏ä‡∏≥‡∏ô‡∏≤‡∏ç‡∏ß‡∏á‡∏®‡πå‡∏ô‡∏≤‡∏¢‡∏ß‡∏®‡∏¥‡∏ô ‡πÄ‡∏≠‡∏µ‡πà‡∏¢‡∏°‡∏ï‡πà‡∏≠‡∏°‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏®‡∏∏‡∏†‡∏¥‡∏™‡∏£‡∏≤ ‡∏™‡∏∏‡∏ß‡∏£‡∏£‡∏ì‡∏®‡∏±‡∏Å‡∏î‡∏¥‡πå‡∏™‡∏¥‡∏ô‡∏ô‡∏≤‡∏¢‡∏™‡∏∏‡∏£‡∏û‡∏á‡∏©‡πå ‡∏à‡∏±‡∏ô‡∏ó‡∏ö‡∏π‡∏£‡∏ì‡πå‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏´‡∏ó‡∏±‡∏¢‡∏ô‡∏±‡∏ô‡∏ó‡πå ‡πÄ‡∏ó‡∏û‡∏Å‡∏≥‡∏õ‡∏ô‡∏≤‡∏ó‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏≠‡∏ä‡∏¥‡∏£‡∏ç‡∏≤‡∏ì‡πå ‡∏•‡∏≥‡∏û‡∏£‡∏´‡∏°‡πÅ‡∏Å‡πâ‡∏ß‡∏ô‡∏≤‡∏¢‡∏≠‡∏±‡∏Ñ‡∏£‡∏ß‡∏¥‡∏ó‡∏¢‡πå ‡∏ô‡∏¥‡∏ò‡∏¥‡∏ö‡∏∏‡∏ç‡∏ç‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡πÑ‡∏≠‡∏•‡∏î‡∏≤ ‡∏ó‡∏≤‡∏´‡∏∞‡∏û‡∏£‡∏´‡∏°‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡πÅ‡∏û‡∏£‡∏ó‡∏≠‡∏á ‡πÄ‡∏û‡∏≠‡∏£‡∏±‡∏ï‡∏ô‡πå‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏≠‡∏†‡∏¥‡∏™‡∏£‡∏≤ ‡∏ô‡∏∏‡∏ï‡∏†‡∏π‡∏ï‡∏¥‡∏û‡∏á‡∏®‡πå‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏Å‡∏ß‡∏¥‡∏ô‡∏ò‡∏£ ‡πÄ‡∏°‡∏Ü‡∏∞‡∏à‡∏≥‡∏£‡∏π‡∏ç‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏Å‡∏≤‡∏ô‡∏ï‡∏¥‡∏°‡∏≤ ‡∏°‡∏±‡∏ó‡∏Å‡∏¥‡∏à‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏à‡∏≤‡∏£‡∏¥‡∏ç‡∏î‡∏≤ ‡∏≠‡∏¥‡∏ô‡∏≠‡∏±‡∏ç‡∏ä‡∏±‡∏ç‡∏ô‡∏≤‡∏¢‡πÇ‡∏ä‡∏Ñ‡∏ä‡∏±‡∏¢ ‡∏≠‡∏£‡∏¥‡∏¢‡∏∞‡∏ö‡∏∏‡∏ç‡∏™‡∏Å‡∏∏‡∏•‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ì‡∏†‡∏±‡∏ó‡∏£ ‡∏î‡∏≥‡πÅ‡∏Å‡πâ‡∏ß‡∏ô‡∏≤‡∏¢‡∏ì‡∏±‡∏ê‡∏î‡∏ô‡∏¢‡πå ‡∏≠‡∏†‡∏¥‡∏£‡∏ï‡∏¥‡∏ä‡∏±‡∏¢‡∏®‡∏¥‡∏£‡∏¥‡∏Å‡∏∏‡∏•‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ó‡∏±‡∏®‡∏ô‡πå‡∏™‡∏∏‡∏î‡∏≤ ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ß‡∏¥‡πÄ‡∏®‡∏©‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ò‡∏µ‡∏£‡∏¥‡∏®‡∏£‡∏≤ ‡∏≠‡∏¥‡∏ô‡∏ï‡∏£‡∏≤‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ô‡∏£‡∏°‡∏• ‡∏û‡∏£‡∏´‡∏°‡πÇ‡∏ä‡∏ï‡∏¥‡∏ô‡∏≤‡∏¢‡∏õ‡∏¥‡∏ï‡∏¥‡∏û‡∏±‡∏ï‡∏ô‡πå ‡∏£‡∏±‡∏ï‡∏ô‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡πÄ‡∏õ‡∏°‡∏¥‡∏Å‡∏≤ ‡∏ö‡∏∏‡∏£‡∏ì‡∏®‡∏¥‡∏£‡∏¥‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏û‡∏£‡∏†‡∏£‡∏ì‡πå ‡∏ö‡∏∏‡∏ç‡∏¢‡∏π‡πà‡∏Æ‡∏á‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏†‡∏≤‡∏ô‡∏¥‡∏•‡∏ô‡∏≤‡∏ñ ‡∏°‡∏≤‡∏ô‡∏∞‡∏ò‡∏±‡∏ç‡∏ç‡∏≤‡∏ô‡∏≤‡∏¢‡∏†‡∏≤‡∏™‡∏Å‡∏£ ‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏°‡∏®‡∏≤‡∏£‡∏±‡∏®‡∏°‡πå ‡∏û‡∏∏‡∏ó‡∏ò‡∏∞‡πÑ‡∏ä‡∏¢‡∏ó‡∏±‡∏®‡∏ô‡πå‡∏ô‡∏≤‡∏¢‡∏£‡∏±‡∏ê‡∏ò‡∏µ‡∏£‡πå ‡∏û‡∏ô‡∏¥‡∏ï‡∏à‡∏¥‡∏ô‡∏î‡∏≤‡∏®‡∏±‡∏Å‡∏î‡∏¥‡πå‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ß‡∏¥‡∏£‡∏±‡∏•‡∏û‡∏±‡∏ä‡∏£ ‡∏Ñ‡∏∏‡∏ì‡∏≤‡∏™‡∏ñ‡∏¥‡∏ï‡∏¢‡πå‡∏ä‡∏±‡∏¢‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏®‡∏®‡∏¥‡∏ô‡∏¥‡∏†‡∏≤ ‡πÅ‡∏Å‡πâ‡∏ß‡∏™‡∏∏‡∏ß‡∏£‡∏£‡∏ì‡πå‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏™‡∏∏‡∏ä‡∏±‡∏ç‡∏ç‡∏≤ ‡∏´‡∏ô‡∏π‡∏¢‡∏¥‡πâ‡∏°‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏™‡∏∏‡∏†‡∏±‡∏™‡∏™‡∏£‡∏≤ ‡∏§‡∏Å‡∏©‡πå‡∏£‡∏±‡∏ï‡∏ô‡∏µ‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏™‡∏∏‡∏°‡∏≤‡∏•‡∏µ ‡∏ô‡∏¥‡∏°‡∏¥‡∏ï‡∏£‡∏°‡∏á‡∏Ñ‡∏•‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡πÅ‡∏™‡∏á‡∏ï‡∏∞‡∏ß‡∏±‡∏ô ‡∏ö‡∏∏‡∏©‡∏õ‡∏ß‡∏ô‡∏¥‡∏ä";

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  DRUG DATA
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const drugDatabase = [
    {name:"Paracetamol",ans:"Analgesic, Antipyretic"},{name:"Amoxicillin",ans:"Antibiotic (Penicillin)"},
    {name:"Cetirizine",ans:"Antihistamine Gen 2"},{name:"Omeprazole",ans:"PPI (‡∏•‡∏î‡∏Å‡∏£‡∏î)"},
    {name:"Simvastatin",ans:"Statin (‡∏•‡∏î‡πÑ‡∏Ç‡∏°‡∏±‡∏ô)"},{name:"Metformin",ans:"Biguanide (‡πÄ‡∏ö‡∏≤‡∏´‡∏ß‡∏≤‡∏ô)"},
    {name:"Amlodipine",ans:"CCB (‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô)"},{name:"Ibuprofen",ans:"NSAIDs"},
    {name:"Prednisolone",ans:"Corticosteroid"},{name:"Salbutamol",ans:"Œ≤2-agonist (‡∏Ç‡∏¢‡∏≤‡∏¢‡∏´‡∏•‡∏≠‡∏î‡∏•‡∏°)"},
    {name:"Losartan",ans:"ARB (‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô)"},{name:"Atorvastatin",ans:"Statin (‡∏•‡∏î‡πÑ‡∏Ç‡∏°‡∏±‡∏ô)"},
    {name:"Clopidogrel",ans:"Antiplatelet"},{name:"Gabapentin",ans:"Anticonvulsant"},
    {name:"Domperidone",ans:"Antiemetic (‡πÅ‡∏Å‡πâ‡∏Ñ‡∏•‡∏∑‡πà‡∏ô‡πÑ‡∏™‡πâ)"},{name:"Lorazepam",ans:"Benzodiazepine"},
    {name:"Tramadol",ans:"Opioid Analgesic"},{name:"Acetylcysteine",ans:"Mucolytic"},
    {name:"ORS",ans:"Electrolyte solution"},{name:"Mefenamic Acid",ans:"NSAIDs (‡πÅ‡∏Å‡πâ‡∏õ‡∏ß‡∏î‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)"},
    {name:"Enalapril",ans:"ACE Inhibitor"},{name:"Propranolol",ans:"Beta-blocker"},
    {name:"Furosemide",ans:"Loop Diuretic"},{name:"Warfarin",ans:"Anticoagulant (Vit K antagonist)"},
    {name:"Digoxin",ans:"Cardiac Glycoside"},{name:"Azithromycin",ans:"Macrolide Antibiotic"},
    {name:"Ciprofloxacin",ans:"Fluoroquinolone Antibiotic"},{name:"Doxycycline",ans:"Tetracycline Antibiotic"},
    {name:"Ceftriaxone",ans:"Cephalosporin Gen 3"},{name:"Norfloxacin",ans:"Antibiotic (UTI/GI)"},
    {name:"Diazepam",ans:"Benzodiazepine (anticonvulsant)"},{name:"Fluoxetine",ans:"SSRI"},
    {name:"Amitriptyline",ans:"TCA (‡∏ã‡∏∂‡∏°‡πÄ‡∏®‡∏£‡πâ‡∏≤/‡∏õ‡∏ß‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏≤‡∏ó)"},{name:"Phenytoin",ans:"Anticonvulsant (‡∏Å‡∏±‡∏ô‡∏ä‡∏±‡∏Å)"},
    {name:"CPM",ans:"Antihistamine Gen 1"},{name:"Loratadine",ans:"Antihistamine Gen 2"},
    {name:"Fexofenadine",ans:"Antihistamine Gen 3"},{name:"Dextromethorphan",ans:"Antitussive (‡πÑ‡∏≠‡πÅ‡∏´‡πâ‡∏á)"},
    {name:"Bromhexine",ans:"Mucolytic (‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡πÄ‡∏™‡∏°‡∏´‡∏∞)"},{name:"Famotidine",ans:"H2 Blocker"},
    {name:"Hyoscine",ans:"Antispasmodic (‡∏õ‡∏ß‡∏î‡πÄ‡∏Å‡∏£‡πá‡∏á)"},{name:"Loperamide",ans:"Antidiarrheal"},
    {name:"Glibenclamide",ans:"Sulfonylurea (‡πÄ‡∏ö‡∏≤‡∏´‡∏ß‡∏≤‡∏ô)"},{name:"Allopurinol",ans:"Xanthine oxidase inhibitor"},
    {name:"Colchicine",ans:"Antigout (‡πÄ‡∏Å‡∏≤‡∏ï‡πå‡∏Å‡∏≥‡πÄ‡∏£‡∏¥‡∏ö)"},{name:"Diclofenac",ans:"NSAIDs"},
    {name:"Naproxen",ans:"NSAIDs"},{name:"Celecoxib",ans:"COX-2 Inhibitor"},
    {name:"Aspirin",ans:"Antiplatelet / NSAIDs"},{name:"Ergotamine",ans:"Antimigraine"}
];

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  INIT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let allStudents = [];

function initData() {
    const sciList = rawData.sci.map(s => { const [n, id] = s.split(' ('); return { nickname: n, id: id.replace(')', ''), track: 'sci' }; });
    const careList = rawData.care.map(s => { const [n, id] = s.split(' ('); return { nickname: n, id: id.replace(')', ''), track: 'care' }; });
    allStudents = [...sciList, ...careList].sort((a,b) => a.id.localeCompare(b.id));

    const names = realNamesRaw.split(/(?=‡∏ô‡∏≤‡∏¢|‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß)/).filter(n => n.trim())
        .map(n => n.replace(/^‡∏ô‡∏≤‡∏¢|^‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß/, '').trim());
    allStudents.forEach((s, i) => { s.realName = names[i] || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏'; });
}

function updateStats() {
    const sci = rawData.sci.length, care = rawData.care.length, total = sci + care;
    document.getElementById('p-sci').textContent = sci;
    document.getElementById('p-care').textContent = care;
    document.getElementById('cnt-sci').textContent = sci;
    document.getElementById('cnt-care').textContent = care;
    document.getElementById('cnt-all').textContent = total;
    setTimeout(() => {
        document.getElementById('bar-sci').style.width = (sci/total*100).toFixed(1) + '%';
        document.getElementById('bar-care').style.width = (care/total*100).toFixed(1) + '%';
    }, 300);
}

let currentTrack = 'all';

function setTrack(track) {
    currentTrack = track;
    document.querySelectorAll('.stat-card').forEach(c => c.className = 'stat-card');
    document.getElementById('card-' + track).classList.add('active-' + track);
    render(track);
}

function render(track, filter = '') {
    let list = [];
    if (track === 'sci') list = allStudents.filter(s => s.track === 'sci');
    else if (track === 'care') list = allStudents.filter(s => s.track === 'care');
    else {
        list = [...allStudents];
        if (filter) {
            const f = filter.toLowerCase();
            list = list.filter(s => s.nickname.toLowerCase().includes(f) || s.id.includes(f) || s.realName.toLowerCase().includes(f));
        }
    }

    document.getElementById('names-display').innerHTML = list.map(item => {
        const color = item.track === 'sci' ? 'var(--sci)' : 'var(--care)';
        const imgPath = `img/${item.id}.jpg`;
        const defaultImg = `https://ui-avatars.com/api/?name=${encodeURIComponent(item.nickname.split(' ')[0])}&background=${item.track === 'sci' ? '2563eb' : '10b981'}&color=fff&size=128`;
        return `
            <div class="name-tag" onclick="openProfileModal('${item.nickname}', '${item.realName}', '${item.id}', '${item.track}', '${imgPath}', '${defaultImg}')">
                <img src="${imgPath}" onerror="this.onerror=null;this.src='${defaultImg}'" alt="${item.nickname}">
                <div>
                    <div class="nt-nickname">${item.nickname}</div>
                    <div class="nt-id">${item.id}</div>
                    <div class="nt-badge" style="background:${color}">${item.track.toUpperCase()}</div>
                </div>
            </div>
        `;
    }).join('');
}

function handleSearch() {
    const q = document.getElementById('search').value;
    document.querySelectorAll('.stat-card').forEach(c => c.className = 'stat-card');
    document.getElementById('card-all').classList.add('active-all');
    currentTrack = 'all';
    render('all', q);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  PROFILE MODAL
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openProfileModal(nickname, realname, id, track, imgPath, defaultImg) {
    document.getElementById('modal-img').src = imgPath;
    document.getElementById('modal-img').onerror = function() { this.src = defaultImg; };
    document.getElementById('modal-nickname').textContent = nickname;
    document.getElementById('modal-realname').textContent = realname;
    document.getElementById('modal-id').textContent = id;
    const badge = document.getElementById('modal-badge');
    badge.textContent = track.toUpperCase();
    badge.style.background = track === 'sci' ? 'var(--sci)' : 'var(--care)';
    document.getElementById('profile-modal').classList.add('active');
}

function closeProfileModal() {
    document.getElementById('profile-modal').classList.remove('active');
}
document.getElementById('profile-modal').addEventListener('click', e => {
    if (e.target === e.currentTarget) closeProfileModal();
});

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  FLASHCARD
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function nextDrug() {
    const d = drugDatabase[Math.floor(Math.random() * drugDatabase.length)];
    document.getElementById('flash-drug').textContent = d.name;
    document.getElementById('flash-ans').textContent = d.ans;
    document.getElementById('flash-ans').style.display = 'none';
    document.getElementById('flash-hint').textContent = '‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏â‡∏•‡∏¢';
    document.getElementById('flash-hint').style.display = 'block';
}

function revealDrug() {
    document.getElementById('flash-ans').style.display = 'block';
    document.getElementById('flash-hint').style.display = 'none';
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  TOAST
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function showToast(msg, type = 'info') {
    const t = document.getElementById('toast');
    t.textContent = msg;
    t.className = `show ${type}`;
    clearTimeout(t._timeout);
    t._timeout = setTimeout(() => t.classList.remove('show'), 3000);
}
window.showToast = showToast;

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  DAILY BTN VISIBILITY ‚Äî show after login
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const origRenderLoginState = window.renderLoginState;
// daily btn shown from firebase module

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  INIT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
initData();
updateStats();
setTrack('all');
nextDrug();
</script>
</body>
</html>
